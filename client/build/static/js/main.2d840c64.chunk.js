(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t,n){},129:function(e,t,n){},161:function(e,t,n){e.exports=n(264)},166:function(e,t,n){},213:function(e,t){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"logout",(function(){return E})),n.d(a,"login",(function(){return y})),n.d(a,"register",(function(){return O}));var r={};n.r(r),n.d(r,"connectSocket",(function(){return U})),n.d(r,"authenticateSocket",(function(){return P})),n.d(r,"fetchMoreMessages",(function(){return M})),n.d(r,"sendPrivateMessage",(function(){return x})),n.d(r,"sendGroupMessage",(function(){return _})),n.d(r,"leaveGroup",(function(){return R})),n.d(r,"disconnectSocket",(function(){return T})),n.d(r,"updateConversations",(function(){return D})),n.d(r,"getUsername",(function(){return z}));var c={};n.r(c),n.d(c,"getCurrentUser",(function(){return F})),n.d(c,"getUsers",(function(){return A})),n.d(c,"getConversations",(function(){return K})),n.d(c,"setUsername",(function(){return q}));var s={};n.r(s),n.d(s,"getThumbnailURL",(function(){return V}));var o={};n.r(o),n.d(o,"createPlaylist",(function(){return Q})),n.d(o,"updatePlaylist",(function(){return X})),n.d(o,"deletePlaylist",(function(){return Y})),n.d(o,"getPlaylists",(function(){return ee})),n.d(o,"getUserPlaylists",(function(){return te})),n.d(o,"getPlaylist",(function(){return ne})),n.d(o,"getRecentPlaylists",(function(){return ae}));var i=n(0),u=n.n(i),l=n(13),m=n.n(l),d=(n(166),n(6));var f,p=n(136),g=n.n(p),h=n(135),v=n.n(h),b=n(52),E=function(){return b.post("/api/auth/logout").then((function(){return!0})).catch((function(){return!1}))},y=function(e,t){return b.post("/api/auth/login",{email:e,password:t}).then((function(e){return e})).catch((function(e){return e.response}))},O=function(e,t){return b.post("/api/auth/register",{email:e,password:t}).then((function(e){return e})).catch((function(e){return e.response}))},k=n(130),j=n.n(k),w=n(265),C=w.uniqueNamesGenerator,S=w.starWars,N=n(52),U=function(){var e=window.location.hostname;return f=j.a.connect(e)},P=function(){return(f=U()).on("connect",(function(){f.emit("authenticate").on("authenticated",(function(){console.log("socket authentication complete")})).on("unauthorized",(function(e){console.log("unauthorized: ".concat(JSON.stringify(e.data)))}))})),f},M=function(e,t){return N.get("/api/users/current/conversations/".concat(e[t]._id,"/load-messages/").concat(e[t].messages.length)).then((function(n){return I(e,t,n.data)})).catch((function(e){console.log(e)}))},I=function(e,t,n){var a=e[t].messages.concat(n),r=e;return r[t].messages=a,r},x=function(e,t,n){return e.preventDefault(),f.emit("message",{reciever_id:n,contents:t}),!0},_=function(e,t,n,a){return e.preventDefault(),f.emit("group-message",{correspondent:n,messageToSend:t,group:a}),!0},R=function(e){f&&f.emit("leave-group",e)},T=function(){f&&f.close(),f=null},D=function(e,t){var n=t;return e&&(e.newConversation?n[e.correspondent]=e.newConversation:n[e.correspondent].messages.unshift(e.message)),n},z=function(e){return e?e.username:C({dictionaries:[S]})};n(33).config();var L=n(52),F=function(){return L.get("/api/users/current").then((function(e){return e.data})).catch((function(e){console.log(e)}))},A=function(){return L.get("/api/users").then((function(e){var t=e.data.filter((function(e){return e.username}));return G(t)})).catch((function(e){console.log(e)}))},K=function(e){return L.get("/api/users/current/conversations").then((function(t){return B(t.data,e)})).catch((function(e){console.log(e)}))},q=function(e,t){return L.put("/api/users/current/set-username",{_id:e,username:t}).then((function(e){return console.log("response: ",e),e})).catch((function(e){console.log(e)}))},B=function(e,t){var n={};return e.forEach((function(e){n[e.users[0]!==t?e.users[0]:e.users[1]]=e})),n},G=function(e){var t={};return e.forEach((function(e){t[e._id]=e})),t},H=n(131),W=n(52),$=/^(?:\/video|\/channels\/[\w-]+|\/groups\/[\w-]+\/videos)?\/(\d+)$/,J=/^(?:\/embed)?\/([\w-]{10,12})$/,V=function(e){e=e||"";var t=Object(H.parse)(e,!0);if(-1!==["www.youtube.com","youtube.com","youtu.be"].indexOf(t.host)){var n=null;if("v"in t.query)t.query.v&&t.query.v.match(/^[\w-]{10,12}$/)&&(n=t.query.v);else{var a=J.exec(t.pathname);a&&(n=a[1])}if(n)return"https://img.youtube.com/vi/".concat(n,"/hqdefault.jpg")}if(-1!==["www.vimeo.com","vimeo.com","player.vimeo.com"].indexOf(t.host)){var r=$.exec(t.pathname);if(r){var c=r[1];return W.get("https://vimeo.com/api/v2/video/".concat(c,".json")).then((function(e){return e.data[0].thumbnail_large})).catch((function(){return!1}))}}return null};n(33).config();var Z=n(52),Q=function(e,t){return Z.post("/api/playlists",{title:e,tracks:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},X=function(e,t){return Z.put("/api/playlists/".concat(e),t).then((function(e){return e.data})).catch((function(e){return e.response.data}))},Y=function(e){return Z.delete("/api/playlists/".concat(e)).then((function(e){return e.data})).catch((function(e){return e.response.data}))},ee=function(){return Z.get("/api/playlists").then((function(e){return e.data})).catch((function(e){return e.response.data}))},te=function(){return Z.get("/api/users/current/playlists").then((function(e){return e.data})).catch((function(e){return e.response.data}))},ne=function(e){return Z.get("/api/playlists/".concat(e)).then((function(e){return e.data})).catch((function(e){return e.response.data}))},ae=function(){return Z.get("/api/playlists/recent").then((function(e){return e.data})).catch((function(e){return e.response.data}))},re=n(78),ce=n(305),se=n(71),oe=n.n(se),ie=n(14);n(89);var ue=function(e){var t=Object(i.useState)(!1),n=Object(d.a)(t,2),s=n[0],o=n[1],l=Object(i.useState)(!1),m=Object(d.a)(l,2),f=m[0],p=m[1],h=Object(i.useState)(""),b=Object(d.a)(h,2),E=b[0],y=b[1],O=Object(i.useState)(!1),k=Object(d.a)(O,2),j=k[0],w=k[1],C=Object(ie.f)();Object(i.useEffect)((function(){M()}),[]);var S=function(){p(!1),o(!1)},N=function(t){var n=t.email,c=t.password;a.login(n,c).then((function(t){200===t.status?(r.disconnectSocket(),t.data.username?(S(),I(t.data.username)):(w(!0),x("What should we call you?")),e.loadUserData()):P(t)}))},U=function(e){var t=e.email,n=e.password;e.passwordConfirm===n?a.register(t,n).then((function(e){P(e),200===e.status&&S()})):x("Passwords do not match!")},P=function(e){var t=Object.values(e.data)[0].msg?Object.values(e.data)[0].msg:e.data;x(t.toUpperCase())},M=function(){new URLSearchParams(window.location.search).get("verified")&&(x("Account verified!"),C.push("/"))},I=function(e){S(),x("Welcome, ".concat(e,"!"))},x=function(e){y(e),setTimeout((function(){y(null)}),2e3)};return u.a.createElement("div",{id:"headerContainer"},u.a.createElement("div",{id:"header",className:"\n          ".concat(E&&"color-animation","\n          ").concat(!s&&"signed-in-header","\n        ")},E&&u.a.createElement(re.a,{className:"temporaryMessage",variant:"h5"},E),!E&&e.loaded&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{id:"navButtonsContainer"},e.currentUser&&e.currentUser.username?u.a.createElement(Fe,{id:"sideMenuIconContainer",loadUserData:e.loadUserData}):u.a.createElement("div",{id:"loginButtonContainer"},!s||f?u.a.createElement(ce.a,{id:"loginButton",onClick:function(){o(!0),p(!1)}},"Login"):u.a.createElement(ce.a,{id:"registerButton",onClick:function(){return p(!0)}},"Click here to register"))),s&&u.a.createElement(be,{resetHeader:S,loginOrRegister:function(e){f?U(e):N(e)},handleSetUsername:function(t){c.setUsername(e.currentUser._id,t).then((function(t){200===t.status?(I(t.data.username),w(!1),e.loadUserData()):P(t)}))},enterUsername:j,setEnterUsername:w,showRegisterInputs:f}),!s&&u.a.createElement(fe,{playlists:e.playlists,displayTemporaryMessage:x}),u.a.createElement("div",{id:"messaging-icon-column"},u.a.createElement("div",{id:"messaging-icon-container"},e.currentUser&&e.currentUser.username?u.a.createElement(u.a.Fragment,null,e.messagingSidebarOpen?u.a.createElement(g.a,{id:"messaging-icon-filled",style:{fontSize:40},onClick:e.toggleMessagingSidebar}):u.a.createElement(v.a,{id:"messaging-icon-outline",style:{fontSize:40},onClick:e.toggleMessagingSidebar})):u.a.createElement(u.a.Fragment,null,!s&&u.a.createElement(oe.a,{onClick:function(){return C.push("/")},style:{fontSize:40}})))))))},le=n(16),me=n(314),de=n(315);function fe(e){var t=Object(ie.f)();return u.a.createElement("div",{className:"playlist-search-bar-container"},u.a.createElement(de.a,{size:"small",className:"playlist-search-bar",options:e.playlists||[],onChange:function(n,a){e.displayTemporaryMessage("\u266b ".concat(a.title," \u266b")),t.push("/playlist/".concat(a._id))},getOptionLabel:function(e){return e.title},renderInput:function(e){return u.a.createElement(me.a,Object.assign({},e,{InputProps:Object(le.a)(Object(le.a)({},e.InputProps),{},{style:{color:"#fff"}}),label:"Search for a playlist",variant:"outlined"}))}}))}var pe=n(139),ge=n.n(pe),he=n(75),ve=n.n(he);var be=function(e){var t=Object(i.useState)({}),n=Object(d.a)(t,2),a=n[0],r=n[1],c=Object(i.useRef)(null),s=function(e){console.log("auth input : ",a),"Enter"===e.key&&o()},o=function(){e.enterUsername?e.handleSetUsername(a.username):e.loginOrRegister(a)};Object(i.useEffect)((function(){c&&c.current.focus()}),[e.showRegisterInputs]);var l={border:"1px solid white",color:"white"};return u.a.createElement("div",{id:"authInputs",className:e.showRegisterInputs?"showRegisterInputs":""},u.a.createElement(me.a,{autoFocus:!0,inputRef:c,value:a.username||a.email||"",className:"authInput emailInput ".concat(e.enterUsername&&"username-input"),size:"small",onChange:function(t){return e.enterUsername?r(Object(le.a)(Object(le.a)({},a),{},{username:t.target.value})):r(Object(le.a)(Object(le.a)({},a),{},{email:t.target.value}))},onKeyDown:function(e){return s(e)},variant:"outlined",placeholder:e.enterUsername?"Username":"Email",InputProps:{style:l}}),!e.enterUsername&&u.a.createElement(me.a,{type:"password",value:a.password||"",className:"authInput passwordInput",size:"small",onChange:function(e){return r(Object(le.a)(Object(le.a)({},a),{},{password:e.target.value}))},onKeyDown:function(e){return s(e)},variant:"outlined",placeholder:"Password",InputProps:{style:l}}),e.showRegisterInputs&&u.a.createElement(me.a,{type:"password",value:a.passwordConfirm||"",className:"authInput confirmPasswordInput",size:"small",onChange:function(e){return r(Object(le.a)(Object(le.a)({},a),{},{passwordConfirm:e.target.value}))},onKeyDown:function(e){return s(e)},variant:"outlined",placeholder:"Confirm Password",InputProps:{style:l}}),u.a.createElement("div",{className:e.showRegisterInputs?"loginSubmitContainerRegister":"loginSubmitContainer"},u.a.createElement(ce.a,{onClick:function(){return o(a)},variant:"outlined",className:"submit"},u.a.createElement(ve.a,{fontSize:"large"})),u.a.createElement(ce.a,{onClick:function(){return e.resetHeader()&&r({})},variant:"outlined",className:"close"},u.a.createElement(ge.a,{fontSize:"default"}))))},Ee=n(27);n(231);function ye(e){var t=Object(i.useState)(null),n=Object(d.a)(t,2),a=n[0],s=n[1],o=Object(i.useState)({}),l=Object(d.a)(o,2),m=l[0],f=l[1],p=Object(i.useState)(),g=Object(d.a)(p,2),h=g[0],v=g[1],b=Object(i.useState)(0),E=Object(d.a)(b,2),y=E[0],O=E[1],k=Object(i.useState)(0),j=Object(d.a)(k,2),w=j[0],C=j[1];Object(i.useEffect)((function(){e.currentUser&&c.getConversations(e.currentUser._id).then((function(t){f(t),e.socket.on("message",(function(e){v(e)}))}))}),[e.socket]),Object(i.useEffect)((function(){h&&(f(r.updateConversations(h,m)),O(y+1))}),[h]);return u.a.createElement("div",{className:e.messagingSidebarOpen?"visible messaging-container":"hidden messaging-container"},!a&&u.a.createElement(Oe,{users:e.users,currentUser:e.currentUser,conversations:m,setCorrespondent:s}),a&&u.a.createElement(ut,{messages:m[a._id]?Object(Ee.a)(m[a._id].messages):[],fetchCount:w,newMessageCount:y,correspondent:a,getMessages:function(){r.fetchMoreMessages(m,a._id).then((function(e){f(e),C(w+1)}))},setCorrespondent:s}))}n(33).config();n(232);function Oe(e){var t=e.users?delete e.users[e.currentUser._id]&&Object.values(e.users):[];return u.a.createElement("div",{id:"conversationsContainer"},u.a.createElement("div",{id:"searchContainer"},u.a.createElement(de.a,{id:"users-list",className:"users-list-autocomplete",options:t,onChange:function(t,n){e.setCorrespondent(n)},getOptionLabel:function(e){return e.username},renderInput:function(e){return u.a.createElement(me.a,Object.assign({},e,{InputLabelProps:{style:{color:"#fff"}},placeholder:"Search for a user",label:"Search for a user",variant:"outlined"}))}})),u.a.createElement("div",{id:"conversation-snippets-container"},e.conversations&&Object.keys(e.conversations).map((function(t){return u.a.createElement("div",{key:"conversation".concat(e.conversations[t]._id),className:"conversation-snippet-container",onClick:function(n){e.setCorrespondent(e.users[t])}},u.a.createElement(ke,{currentUser:e.currentUser,correspondent:e.users[t],message:e.conversations[t].messages[0]}))}))))}n(33).config();n(233);function ke(e){return u.a.createElement("div",{className:"conversation-snippet"},u.a.createElement("p",null,u.a.createElement("b",null,e.correspondent&&e.correspondent.username)),u.a.createElement("p",null,e.message.contents))}n(33).config();var je=n(63),we=n(143),Ce=n.n(we),Se=n(144),Ne=n.n(Se),Ue=n(317),Pe=n(308),Me=n(140),Ie=n.n(Me),xe=n(141),_e=n.n(xe),Re=n(309),Te=n(310),De=n(311),ze=n(142),Le=n.n(ze);n(234);function Fe(e){var t,n=Object(ie.f)(),c=u.a.useState({sideMenu:!1}),s=Object(d.a)(c,2),o=s[0],i=s[1],l=function(e,t){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&i(Object(le.a)(Object(le.a)({},o),{},Object(je.a)({},e,t)))}},m=function(){a.logout().then((function(){r.disconnectSocket(),e.loadUserData(),n.push("/")}))};return u.a.createElement("div",null,u.a.createElement(u.a.Fragment,{key:"sideMenu"},u.a.createElement(ce.a,{style:{height:"100%"},onClick:l("sideMenu",!0)},o.sideMenu?u.a.createElement(Ne.a,{style:{fontSize:"40px",color:"white"}}):u.a.createElement(Ce.a,{style:{fontSize:"40px",color:"white"}})),u.a.createElement(Ue.a,{anchor:"left",open:o.sideMenu,onClose:l("sideMenu",!1)},(t="sideMenu",u.a.createElement("div",{role:"presentation",onClick:l(t,!1),onKeyDown:l(t,!1)},u.a.createElement(Pe.a,null,u.a.createElement(Re.a,{onClick:function(){return n.push("/")},button:!0,key:"hotPlaylists"},u.a.createElement(Te.a,null,u.a.createElement(oe.a,null)),u.a.createElement(De.a,{primary:"Hot Playlists"})),u.a.createElement(Re.a,{onClick:function(){return n.push("/my-playlists")},button:!0,key:"playlists"},u.a.createElement(Te.a,null,u.a.createElement(Ie.a,null)),u.a.createElement(De.a,{primary:"My Playlists"})),u.a.createElement(Re.a,{onClick:function(){return n.push("/playlist-create")},button:!0,key:"newPlaylist"},u.a.createElement(Te.a,null,u.a.createElement(_e.a,null)),u.a.createElement(De.a,{primary:"New Playlist"})),u.a.createElement(Re.a,{onClick:m,button:!0,key:"logout"},u.a.createElement(Te.a,null,u.a.createElement(Le.a,null)),u.a.createElement(De.a,{primary:"Logout"}))))))))}var Ae=n(145),Ke=n.n(Ae);n(235);function qe(e){var t=Object(i.useState)(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],s=Object(i.useState)(null),l=Object(d.a)(s,2),m=l[0],f=l[1],p=Object(i.useState)(null),g=Object(d.a)(p,2),h=g[0],v=g[1],b=Object(i.useState)(null),E=Object(d.a)(b,2),y=E[0],O=E[1],k=Object(i.useState)(0),j=Object(d.a)(k,2),w=j[0],C=j[1],S=Object(i.useState)(null),N=Object(d.a)(S,2),U=N[0],P=N[1],M=Object(ie.f)(),I=e.match.params.id;Object(i.useEffect)((function(){return function(){return e.socket&&r.leaveGroup(I)}}),[]),Object(i.useEffect)((function(){x()}),[e.match.params.id]),Object(i.useEffect)((function(){_()}),[e.socket]);var x=function(){var t=new URLSearchParams(window.location.search).get("track");C(t?t-1:0),o.getPlaylist(e.match.params.id).then((function(e){v(e),_(),M.push("/playlist/".concat(e._id))}))},_=function(){f(r.getUsername(e.currentUser)),e.socket.emit("join-group",I,U),P(I),e.socket.on("group-message",(function(e){O(e)}))},R=function(){w+1<=h.tracks.length-1&&C(w+1)};return u.a.createElement("div",{className:"playlist-container"},u.a.createElement("div",{className:"playlist"},a&&u.a.createElement("button",{className:"back-button"},u.a.createElement(Ke.a,{onClick:function(){w-1>=0&&C(w-1)},style:{fontSize:45}})),h&&u.a.createElement(He,{currentTrack:h.tracks[w]&&h.tracks[w].url,trackForward:R,setPlayerReady:c}),a&&u.a.createElement("button",{className:"forward-button"}," ",u.a.createElement(ve.a,{onClick:R,style:{fontSize:45}}))),a&&u.a.createElement(st,{currentUser:e.currentUser,username:m,latestMessage:y,group:I}))}n(33).config();var Be=n(76),Ge=n.n(Be);n(128);function He(e){var t=/^(?:(?:https?:)?\/\/)?(?:www\.)?facebook\.com\/[a-zA-Z0-9\.]+\/videos\/(?:[a-zA-Z0-9\.]+\/)?([0-9]+)/.test(e.currentTrack);return u.a.createElement("div",{className:"player-wrapper"},e.currentTrack?u.a.createElement(Ge.a,{className:t?"facebook-react-player":"react-player",url:e.currentTrack,width:t?"calc(50% - 46px)":"100%",height:"100%",controls:!0,onEnded:e.trackForward,playing:!0,onReady:function(){return e.setPlayerReady(!0)}}):u.a.createElement("h2",{style:{color:"white",margin:"auto",textAlign:"center"}},"No Playlist Selected"))}n(33).config();var We=n(92),$e=n.n(We),Je=n(146);n(254);function Ve(e){var t=Object(i.useState)([]),n=Object(d.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)(null),l=Object(d.a)(c,2),m=l[0],f=l[1],p=Object(i.useState)({title:null,tracks:null}),g=Object(d.a)(p,2),h=g[0],v=g[1],b=Object(i.useState)(null),E=Object(d.a)(b,2),y=E[0],O=E[1],k=Object(ie.f)();Object(i.useEffect)((function(){e.edit&&o.getPlaylist(e.match.params.id).then((function(e){r(e.tracks),f(e.title)}))}),[]);var j=function(e){e.preventDefault(),a.length>0?o.createPlaylist(m,a).then((function(e){e.errors?v(e.errors):e&&k.push("/playlist/".concat(e._id))})):v({tracks:"Add some tracks!"})},w=function(){var e=Object(Je.a)($e.a.mark((function e(t){var n;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!Ge.a.canPlay(y)){e.next=10;break}return e.next=4,s.getThumbnailURL(y);case 4:n=e.sent,r([].concat(Object(Ee.a)(a),[{url:y,thumbnailUrl:n}])),O(""),h.tracks&&v({tracks:null}),e.next=11;break;case 10:v({tracks:"Cannot add track"});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement("div",{className:"playlist-create-container"},u.a.createElement("div",{className:"playlist-create-inputs-container"},u.a.createElement("div",{className:"input-container playlist-create-input-container ".concat(e.edit&&"edit-inputs-container")},u.a.createElement(me.a,{onKeyDown:function(e){return"Enter"===e.key&&w(e)},placeholder:"Paste link to media here",value:y||"",error:h.tracks,className:"message-input",onChange:function(e){return O(e.target.value)},autoFocus:!0,InputProps:{style:{color:"#fff"}}}),u.a.createElement(ce.a,{className:"standard-submit-button",onClick:function(e){return w(e)},variant:"contained"},"Add Track")),u.a.createElement("div",{className:"input-container playlist-create-input-container ".concat(e.edit&&"edit-inputs-container")},u.a.createElement(me.a,{onKeyDown:function(e){return"Enter"===e.key&&j(e)},placeholder:!e.edit&&"Enter your playlist title here",error:h.title,value:m||"",className:"message-input",onChange:function(e){return f(e.target.value)},InputProps:{style:{color:"#fff"}}}),u.a.createElement(ce.a,{className:"standard-submit-button",onClick:function(t){e.edit?o.updatePlaylist(e.match.params.id,{title:m,tracks:a}).then((function(e){e.errors?v(e.errors):k.push("/my-playlists")})):j(t)},variant:"contained"},e.edit?"Save Changes":"Create"))),a&&u.a.createElement(rt,{tracks:a,setTracks:r,deleteTrack:function(e){a.splice(e,1)&&r(Object(Ee.a)(a))}}))}n(33).config();var Ze=n(147),Qe=n.n(Ze),Xe=n(77),Ye=n.n(Xe);n(255);function et(e){var t=Object(i.useState)([]),n=Object(d.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)(null),s=Object(d.a)(c,2),l=s[0],m=s[1],f=Object(i.useState)(!1),p=Object(d.a)(f,2),g=p[0],h=p[1],v=Object(ie.f)();Object(i.useEffect)((function(){e.socket?O():y()}),[e.socket]);var b=function(e,t){t?v.push("/playlist/".concat(e._id,"?track=").concat(t)):v.push("/playlist/".concat(e._id))},E=function(){m(null),h(!1)},y=function(){o.getUserPlaylists().then((function(e){r(e)}))},O=function(){e.socket.on("get-active-playlists",(function(e){var t=Object(Ee.a)(new Map(e.map((function(e){return[e._id,e]}))).values());r(Object(Ee.a)(t))})),e.socket.emit("get-active-playlists",!0)};return u.a.createElement("div",{className:"my-playlists-container"},a&&a.map((function(t,n){return u.a.createElement("div",{key:"playlist".concat(n),className:"playlist"},u.a.createElement("div",{className:"playlist-head"},u.a.createElement("div",{className:"playlist-title-container"},u.a.createElement("h2",null,t.title)),u.a.createElement("div",{className:"playlist-functions-container"},u.a.createElement(ce.a,{className:"playlist-play-button standard-submit-button ".concat(e.socket&&"hot"),variant:"contained",style:{gridColumn:e.socket&&"1 / span 2"},onClick:function(){return b(t)}},"Play"),!e.socket&&u.a.createElement(ce.a,{className:"playlist-edit-button standard-submit-button",variant:"contained",onClick:function(){return function(e){v.push("/playlist-edit/".concat(e._id))}(t)}},"Edit"))),u.a.createElement("div",{className:"playlist-body"},t.tracks.map((function(e,n){return u.a.createElement("div",{onClick:function(){return b(t,n+1)},key:"track".concat(n),className:"my-playlists-thumbnail"},u.a.createElement("img",{src:e.thumbnailUrl?e.thumbnailUrl:Ye.a,className:"track-preview"}))}))),!e.socket&&u.a.createElement(ce.a,{className:"delete-playlist-button",variant:"contained",color:"secondary",size:"small",onClick:function(){return function(e){m(e),h(!0)}(t)}},u.a.createElement(Qe.a,{fontSize:"small"})))})),!a[0]&&u.a.createElement("div",{className:"no-playlists"},u.a.createElement("h2",null,"No playlists here!")),u.a.createElement(pt,{action:function(e){o.deletePlaylist(e._id).then((function(){y(),E()})),m(null)},open:g,handleClose:E,item:l&&l}))}var tt=n(94),nt=n(148),at=n.n(nt);n(260);function rt(e){var t=Object(tt.b)((function(t){var n=t.i,a=t.track;return u.a.createElement(ct,{thumbnailUrl:a.thumbnailUrl,deleteTrack:e.deleteTrack,index:n,className:"sortable-item"})})),n=Object(tt.a)((function(e){var t=e.children;return u.a.createElement("div",{className:"sortable-container"},t)}));return u.a.createElement(n,{axis:"xy",onSortEnd:function(t){var n=t.oldIndex,a=t.newIndex,r=e.tracks;e.setTracks(at()(r,n,a))}},e.tracks.map((function(e,n){return u.a.createElement(t,{key:"item-".concat(n),index:n,i:n,track:e})})))}n(261);function ct(e){var t=Object(i.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1];return u.a.createElement("div",{onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},className:"sortable-item"},u.a.createElement("img",{src:e.thumbnailUrl?e.thumbnailUrl:Ye.a,className:"track-preview \n          ".concat(a&&"low-opacity")}),a&&u.a.createElement("button",{onClick:function(){return e.deleteTrack(e.index)},className:"track-remove-button"},"DELETE"),u.a.createElement("button",{onClick:function(){return e.deleteTrack(e.index)},className:"track-remove-button-mobile"},"DELETE"))}n(262),n(129);function st(e){var t=Object(i.useState)([]),n=Object(d.a)(t,2),a=n[0],c=n[1],s=Object(i.useState)(0),o=Object(d.a)(s,2),l=o[0],m=o[1],f=Object(i.useState)(""),p=Object(d.a)(f,2),g=p[0],h=p[1],v=Object(i.useRef)(null);Object(i.useEffect)((function(){c([])}),[e.group]);Object(i.useEffect)((function(){e.latestMessage&&c([e.latestMessage].concat(Object(Ee.a)(a)))}),[e.latestMessage]);var b=function(t,n){n.length>0&&l<3&&(0===l&&setTimeout((function(){m(0)}),5e3),m(l+1),r.sendGroupMessage(t,n,{_id:e.currentUser?e.currentUser._id:"",username:e.username},e.group)&&h(""))};return u.a.createElement("div",{className:"group-chat"},u.a.createElement("div",{id:"groupMessagesContainer",className:"messages-container"},a.map((function(e,t){return u.a.createElement("div",{className:"message",key:"message".concat(t)},u.a.createElement("p",{className:"message-sender"},e.correspondent.username),u.a.createElement("p",{className:"group-message-content"},e.message))})),u.a.createElement("div",{ref:v})),u.a.createElement("div",{id:"groupChatFooter"},u.a.createElement("div",{className:"input-container"},u.a.createElement(me.a,{onKeyDown:function(e){return"Enter"===e.key&&b(e,g)},placeholder:"Send a message",value:g,className:"message-input",onChange:function(e){return h(e.target.value)},InputProps:{style:{color:"#fff"}}}),u.a.createElement(ce.a,{className:"standard-submit-button",onClick:function(e){return b(e,g)},variant:"contained"},"Send"))))}n(33).config();var ot=n(149),it=n.n(ot);function ut(e){var t=Object(i.useState)(""),n=Object(d.a)(t,2),a=n[0],c=n[1],s=Object(i.useRef)(null),o=Object(i.useRef)(null),l=function(t,n){r.sendPrivateMessage(t,n,e.correspondent._id)&&c("")};return Object(i.useEffect)((function(){e.fetchCount>0&&o.current.scrollIntoView()}),[e.fetchCount]),Object(i.useEffect)((function(){s.current.scrollIntoView()}),[e.newMessageCount]),u.a.createElement("div",{id:"chatContainer"},u.a.createElement("div",{id:"chatHeaderContainer"},u.a.createElement(it.a,{id:"backArrow",onClick:function(){return e.setCorrespondent(null)},style:{fontSize:40}}),u.a.createElement("h2",{id:"chatHeader"},e.correspondent.username)),u.a.createElement("div",{className:"messagesContainer",onScroll:function(t){return 0===t.target.scrollTop&&e.getMessages()}},function(){for(var t=[],n=e.messages.length-1;n>=0;n--)t.push(u.a.createElement("div",{key:"message".concat(e.messages[n]._id).concat(n),className:e.messages[n].sender===e.correspondent._id?"their-message":"my-message"},u.a.createElement("div",{className:"message"},e.messages[n].contents))),n===e.messages.length-30&&t.push(u.a.createElement("div",{key:"scrollPosition",ref:o}));return t}(),u.a.createElement("div",{ref:s})),u.a.createElement("div",{className:"chatFooter"},u.a.createElement("div",{className:"input-container"},u.a.createElement(me.a,{onKeyDown:function(e){return"Enter"===e.key&&l(e,a)},placeholder:"Send a message",value:a,className:"message-input",onChange:function(e){return c(e.target.value)},InputProps:{style:{color:"#fff"}},multiline:!0}),u.a.createElement(ce.a,{className:"standard-submit-button",onClick:function(e){return l(e,a)},variant:"contained"},"Send"))))}n(33).config();var lt=n(312),mt=n(316);function dt(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var ft=Object(lt.a)((function(e){return{paper:{position:"absolute",color:"#fff",width:260,backgroundColor:"black",border:"1px solid #f50057",borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),textAlign:"center"}}}));function pt(e){var t=ft(),n=u.a.useState(dt),a=Object(d.a)(n,1)[0],r=u.a.createElement("div",{style:a,className:t.paper},u.a.createElement("h2",{id:"simple-modal-title"},"Delete ",e.item&&e.item.title,"?"),u.a.createElement(ce.a,{onClick:function(){return e.action(e.item)},variant:"outlined",color:"secondary"},"DELETE"),u.a.createElement(pt,null));return u.a.createElement(mt.a,{id:"generalModal",open:e.open,onClose:e.handleClose,"aria-labelledby":"simple-modal-title"},r)}var gt=n(40),ht=n(93),vt=n(313),bt=n(151),Et=Object(bt.a)({palette:{primary:{main:"#fff"}}});n(263);function yt(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=u.a.useState(e),n=Object(d.a)(t,2),a=n[0],r=n[1],c=u.a.useCallback((function(){r((function(e){return!e}))}),[]);return[a,c]}(),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(i.useState)(null),l=Object(d.a)(s,2),m=l[0],f=l[1],p=Object(i.useState)({}),g=Object(d.a)(p,2),h=g[0],v=g[1],b=Object(i.useState)(null),E=Object(d.a)(b,2),y=E[0],O=E[1],k=Object(i.useState)([]),j=Object(d.a)(k,2),w=j[0],C=j[1],S=Object(i.useState)(!1),N=Object(d.a)(S,2),U=N[0],P=N[1];Object(i.useEffect)((function(){_(),M()}),[]);var M=function(){c.getCurrentUser().then((function(e){e?x(e):I(),P(!0)}))},I=function(){f(null),O(r.connectSocket())},x=function(e){f(e),O(r.authenticateSocket()),c.getUsers().then((function(e){v(e)}))},_=function(){o.getRecentPlaylists().then((function(e){C(e)}))};return u.a.createElement(ht.b,null,u.a.createElement("div",{id:"app"},u.a.createElement(ht.a,null,u.a.createElement("meta",{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width"})),u.a.createElement(vt.a,{theme:Et},u.a.createElement(gt.a,null,u.a.createElement(ue,{messagingSidebarOpen:n,toggleMessagingSidebar:a,playlists:w,loaded:U,loadUserData:M,currentUser:m}),u.a.createElement("div",{id:"main-section-container"},u.a.createElement("div",{id:"main-section",className:n?"mobile-main-section":void 0},u.a.createElement(ie.c,null,u.a.createElement(ie.a,{path:"/my-playlists",render:function(){return u.a.createElement(et,null)}}),u.a.createElement(ie.a,{path:"/playlist/:id",render:function(e){return y&&u.a.createElement(qe,Object.assign({},e,{currentUser:m,socket:y}))}}),u.a.createElement(ie.a,{path:"/playlist-edit/:id",render:function(e){return m&&u.a.createElement(Ve,Object.assign({},e,{edit:!0}))}}),u.a.createElement(ie.a,{path:"/playlist-create",render:function(){return u.a.createElement(Ve,{edit:!1})}}),u.a.createElement(ie.a,{path:"/",render:function(){return y&&u.a.createElement(et,{socket:y})}}))),y&&m&&u.a.createElement(ye,{users:h,socket:y,currentUser:m,messagingSidebarOpen:n}))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(yt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,n){e.exports=n.p+"static/media/cassette.f720df37.gif"},89:function(e,t,n){}},[[161,1,2]]]);
//# sourceMappingURL=main.2d840c64.chunk.js.map